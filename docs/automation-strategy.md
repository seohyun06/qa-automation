# Automation Strategy

## 1. 목적

이 프로젝트는 단순히 Playwright 사용법을 익히는 것이 아니라,

- **인증(로그인) 플로우**를 대상으로
- **성공 / 실패 / 세션 유지** 시나리오를 정의하고
- 이를 **E2E(UI) + API 레벨에서 자동화**하는 과정을 통해

테스트 자동화가 실제 서비스 환경에서 어떻게 설계·운영될 수 있는지 경험하는 것을 목표로 한다.

---

## 2. 범위(Scope)

### 2.1 E2E(UI) 테스트

대상: `https://www.saucedemo.com/`

시나리오:

1. **정상 로그인**
   - 올바른 ID/PW 입력 시 `inventory` 페이지로 이동하고,
   - `Products` 텍스트가 노출되는지 검증

2. **잘못된 자격 증명**
   - 존재하지 않는 ID/PW 입력 시
   - 에러 메시지 노출

3. **필수 값 누락**
   - 비밀번호 미입력 상태에서 로그인 시도 시
   - 비밀번호 관련 에러 메시지 노출

4. **세션 유지**
   - 정상 로그인 이후 페이지 새로고침 시
   - 여전히 `inventory` 페이지에 머무르고 `Products` 텍스트가 노출되는지 검증

### 2.2 API 테스트

외부 API(reqres 등)는 실행 환경에서 403 응답으로 차단되는 제약이 있어,  
**독립적인 Mock API 서버를 직접 구성**하여 테스트를 수행했다.

대상: `http://localhost:4000`

시나리오:

1. **로그인 성공**
   - `POST /login` 에 올바른 자격 증명 전송 → `200 OK` + `token` 필드 검증

2. **로그인 실패**
   - `POST /login` 에 잘못된 자격 증명 전송 → `401 Unauthorized` + `error` 메시지 검증

(필요 시 유저 조회 API(`/users/1`, `/users/999`)로 확장 가능)

---

## 3. 비범위(Non-Scope)

- UI 디자인/레이아웃 검증
- 성능/부하 테스트
- 실제 서비스 백엔드 통신 (모든 API는 mock 서버 기준)
- 복잡한 비즈니스 로직 시나리오

이번 포트폴리오에서는 **“자동화 구조와 관점”**에 집중하고,
실제 서비스 도메인에 대한 깊은 시나리오는 범위에서 제외했다.

---

## 4. 테스트 설계 관점

### 4.1 실패 케이스 우선

- 단순한 “행복 경로(happy path)”뿐 아니라
- **인증 실패 / 필수 값 누락 / 세션 유지 실패 가능성** 등
- 사용자가 실제로 겪을 수 있는 실패 상황을 중심으로 테스트를 정의했다.

이는 QA가 단순히 “기능이 된다”를 확인하는 역할이 아니라,
**“어떻게 실패하는지, 실패를 어떻게 제어할 것인지”**에 집중해야 한다는 관점을 반영한다.

### 4.2 UI vs API 분리

- UI(E2E) 테스트는 실제 사용자의 플로우를 그대로 따라가며,
- API 테스트는 Mock 서버를 통해 **상태 코드와 응답 바디를 안정적으로 검증**한다.

이렇게 분리함으로써:

- UI 변경으로 인한 테스트 불안정성을 줄이고
- 문제 발생 시 “UI 문제인지, API 문제인지”를 빠르게 좁혀갈 수 있다.

---

## 5. Mock 서버를 사용한 이유

### 5.1 실행 환경 제약

- 개발 환경에서 외부 API 호출이 403으로 차단되는 문제가 있었음
- 이 상태에서 200/401/404 등의 정상 시나리오를 검증하는 것은 의미가 없다고 판단

### 5.2 제어 가능한 테스트 환경

- Express 기반의 간단한 Mock 서버를 구성하여
  - `/login` 성공/실패,
  - (선택적으로 `/users/1`, `/users/999` 등)
  상태 코드와 응답 바디를 **테스트 목적에 맞게 직접 설계**

이를 통해:

- 네트워크/방화벽 제약과 무관하게
- **항상 재현 가능한 자동화 테스트 환경**을 구축할 수 있었다.

---

## 6. 실행 방법 (요약)

1. **Mock 서버 실행**

```bash
cd mock-server
node mock-server.js
# Mock API running at http://localhost:4000
